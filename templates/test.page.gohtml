{{ template "base" . }}

{{ define "content" }}
<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="mt-4">Design Patterns in Go</h1>
            <hr>
            <h3>Factory Pattern</h3>
            <div>
                <a href="javascript:void(0)" id="dog-factory-btn" class="btn btn-outline-secondary">Get a Dog from Factory</a>
                <a href="javascript:void(0)" id="cat-factory-btn" class="btn btn-outline-secondary">Get a Cat from Factory</a>
            </div>
            <div class="mt-2" style="outline: 1px solid silver; padding: 2px;">
                <pre id="factory-output">
                    <span class="text-muted">Nothing Received Yet...</span>
                </pre>
            </div>
            <hr class="my-4">
            <h3 class="mt-4">Abstract Factory Pattern</h3>
            <div>
                <a href="javascript:void(0)" id="dog-abstract-factory-btn" class="btn btn-outline-secondary">Get a Dog from Abstract Factory</a>
                <a href="javascript:void(0)" id="cat-abstract-factory-btn" class="btn btn-outline-secondary">Get a Cat from Abstract Factory</a>
            </div>
            <div class="mt-2" style="outline: 1px solid silver; padding: 2px;">
                <pre id="abstract-factory-output">
                    <span class="text-muted">Nothing Received Yet...</span>
                </pre>
            </div>
        </div>
    </div>
</div>
{{ end }}

{{ define "js" }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('dog-factory-btn').addEventListener('click', function() {
        fetch('/api/dog-from-factory')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('factory-output').innerHTML = data.error;
                } else {
                    document.getElementById('factory-output').innerText = JSON.stringify(data, null, 2);
                }
            });
    });

    document.getElementById('cat-factory-btn').addEventListener('click', function() {
        fetch('/api/cat-from-factory')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('factory-output').innerHTML = data.error;
                } else {
                    document.getElementById('factory-output').innerText = JSON.stringify(data, null, 2);
                }
            });
    });

    document.getElementById('dog-abstract-factory-btn').addEventListener('click', function() {
        fetch('/api/dog-from-abstract-factory')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('abstract-factory-output').innerHTML = data.error;
                } else {
                    document.getElementById('abstract-factory-output').innerText = JSON.stringify(data, null, 2);
                }
            });
    });

    document.getElementById('cat-abstract-factory-btn').addEventListener('click', function() {
        fetch('/api/cat-from-abstract-factory')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('abstract-factory-output').innerHTML = data.error;
                } else {
                    document.getElementById('abstract-factory-output').innerText = JSON.stringify(data, null, 2);
                }
            });
    });
});
</script>
{{ end }}
